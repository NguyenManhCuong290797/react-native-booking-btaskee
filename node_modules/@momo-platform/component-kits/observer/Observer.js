var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var Subject=function(){function Subject(){(0,_classCallCheck2.default)(this,Subject);this.observers=[];}(0,_createClass2.default)(Subject,[{key:"attach",value:function attach(observer){observer&&this.observers.push(observer);}},{key:"detach",value:function detach(observer){this.observers=this.observers.filter(function(item){return item!==observer;});}},{key:"notify",value:function notify(newState){this.observers.forEach(function(observer){if(typeof observer==='function'){observer(newState);}else{observer.updateData&&observer.updateData(newState);}});}}]);return Subject;}();var ObserverInstance=function(){function ObserverInstance(props){(0,_classCallCheck2.default)(this,ObserverInstance);this.props=props;}(0,_createClass2.default)(ObserverInstance,[{key:"remove",value:function remove(){var _this$props=this.props,detach=_this$props.detach,observer=_this$props.observer;detach&&detach(observer);}}]);return ObserverInstance;}();var Observer=function(){function Observer(props){var _this=this;(0,_classCallCheck2.default)(this,Observer);this.initilize=function(){};this.notify=function(state){_this.subject.notify(state);};this.attach=function(observer){_this.subject.attach(observer);return new ObserverInstance({observer:observer,detach:_this.detach});};this.detach=function(observer){_this.subject.detach(observer);};this.schema=props.schema;this.subject=new Subject();this.data;this.loaded=false;this.initilize();}(0,_createClass2.default)(Observer,null,[{key:"getInstance",value:function getInstance(schema){var Class=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Observer;schema=schema||Class.SCHEMA;var instance=Observer.instances[schema];if(!instance){instance=new Class({schema:schema});Observer.instances[schema]=instance;}return instance;}}]);return Observer;}();exports.default=Observer;Observer.SCHEMA='Observer';Observer.instances={};